<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>y.not.cse Mandhi Giveaway</title>
  <style>
    body {
      margin: 0; 
      height: 100vh; 
      display: flex; 
      justify-content: center; 
      align-items: center;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ff0000, #00ff00, #0000ff, #ff00ff);
      background-size: 300% 300%; 
      animation: colorBreath 8s ease infinite;
      overflow: hidden;
      position: relative;
    }
    
    @keyframes colorBreath {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .bubble {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.3);
      animation: float linear infinite;
    }
    
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(-100vh) rotate(360deg); }
    }
    
    .container {
      background: rgba(255,255,255,0.9); 
      padding: 2rem; 
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3); 
      text-align: center; 
      width: 95%; 
      max-width: 420px;
      position: relative;
      z-index: 10;
    }
    
    h1 { 
      color: #333; 
      margin-bottom: 1.5rem; 
    }
    
    .form-group { 
      margin-bottom: 1rem; 
      text-align: left; 
    }
    
    label { 
      display: block; 
      margin-bottom: 0.5rem; 
      font-weight: bold; 
      color: #333; 
    }
    
    input, select {
      width: 100%; 
      padding: 0.5rem; 
      border: 1px solid #ccc; 
      border-radius: 5px; 
      font-size: 1rem;
    }
    
    button {
      background-color: #e1306c;
      color: white; 
      padding: 0.75rem 1.5rem; 
      border: none;
      border-radius: 5px; 
      cursor: pointer; 
      font-size: 1rem; 
      transition: all 0.3s;
      width: 100%;
      margin-top: 0.5rem;
      position: relative;
      overflow: hidden;
    }
    
    button:hover { 
      background-color: #c13584; 
    }
    
    button:after {
      content: "Follow y.not.cse";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #405DE6;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    button:hover:after {
      opacity: 1;
    }
    
    .error { 
      color: red; 
      font-size: 0.9rem; 
      margin-top: 0.5rem; 
      display: none; 
    }
    
    .success { 
      color: #1b5e20; 
      font-size: 0.95rem; 
      margin-top: 0.75rem; 
      display: none; 
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>y.not.cse Mandhi Giveaway</h1>

    <!-- Invisible iframe to prevent redirect to Google Forms confirmation page -->
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <form
      id="giveawayForm"
      action="https://docs.google.com/forms/d/e/1FAIpQLSccziu3Y3fGYtiVyBIU0cFwTh_Cm6gadGMDatxfRTmNdEKOvw/formResponse"
      method="POST"
      target="hidden_iframe"
      onsubmit="submitted=true;"
      autocomplete="on"
    >
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text"
               id="name"
               name="entry.349309801"
               required />
        <div id="nameError" class="error">Please enter your name</div>
      </div>

      <div class="form-group">
        <label for="instagram">Instagram ID</label>
        <input type="text"
               id="instagram"
               name="entry.1449437708"
               required />
        <div id="instagramError" class="error">Please enter your Instagram ID</div>
      </div>

      <div class="form-group">
        <label for="semester">Current Semester</label>
        <select id="semester" name="entry.1665479029" required>
          <option value="" disabled selected>Select Semester</option>
          <option value="1">1</option><option value="2">2</option>
          <option value="3">3</option><option value="4">4</option>
          <option value="5">5</option><option value="6">6</option>
          <option value="7">7</option><option value="8">8</option>
        </select>
        <div id="semesterError" class="error">Please select your semester</div>
      </div>

      <button type="submit" id="submitBtn">Submit Entry</button>
      <div id="successMsg" class="success">âœ… Entry submitted successfully!</div>
    </form>
  </div>

<script>
  // Create floating bubbles
  function createBubbles() {
    const colors = ['rgba(255,255,255,0.1)', 'rgba(255,255,255,0.15)', 'rgba(255,255,255,0.2)'];
    const body = document.body;
    
    for (let i = 0; i < 15; i++) {
      const bubble = document.createElement('div');
      bubble.classList.add('bubble');
      
      // Random size between 20px and 100px
      const size = Math.random() * 80 + 20;
      bubble.style.width = `${size}px`;
      bubble.style.height = `${size}px`;
      
      // Random position
      bubble.style.left = `${Math.random() * 100}vw`;
      bubble.style.top = `${Math.random() * 100}vh`;
      
      // Random animation duration between 10s and 30s
      const duration = Math.random() * 20 + 10;
      bubble.style.animationDuration = `${duration}s`;
      
      // Random delay
      bubble.style.animationDelay = `${Math.random() * 5}s`;
      
      // Random color
      bubble.style.background = colors[Math.floor(Math.random() * colors.length)];
      
      body.appendChild(bubble);
    }
  }

  // Client-side validation + success UX
  let submitted = false;
  let formSubmitted = false;

  const form = document.getElementById('giveawayForm');
  const successMsg = document.getElementById('successMsg');
  const submitBtn = document.getElementById('submitBtn');

  // Create bubbles when page loads
  window.addEventListener('load', createBubbles);

  // Handle button click
  submitBtn.addEventListener('click', function(e) {
    if (formSubmitted) {
      // If form was already submitted, open Instagram
      e.preventDefault();
      window.open('https://www.instagram.com/y.not.cse?igsh=NzJudHQ2YWVzbGVp', '_blank');
    }
  });

  form.addEventListener('submit', function(event) {
    // Clear errors
    document.getElementById('nameError').style.display = 'none';
    document.getElementById('instagramError').style.display = 'none';
    document.getElementById('semesterError').style.display = 'none';

    let isValid = true;
    const name = document.getElementById('name').value.trim();
    const instagram = document.getElementById('instagram').value.trim();
    const semester = document.getElementById('semester').value;

    if (!name) { document.getElementById('nameError').style.display = 'block'; isValid = false; }
    if (!instagram) { document.getElementById('instagramError').style.display = 'block'; isValid = false; }
    if (!semester) { document.getElementById('semesterError').style.display = 'block'; isValid = false; }

    if (!isValid) {
      event.preventDefault();
      return;
    }

    // Mark form as submitted
    formSubmitted = true;
    submitted = true;
    
    // Change button text immediately for better UX
    submitBtn.textContent = 'Follow y.not.cse';
  });

  // Show success when the hidden iframe loads after submit
  document.getElementById('hidden_iframe').addEventListener('load', function() {
    if (submitted) {
      successMsg.style.display = 'block';
      form.reset();
      document.getElementById('semester').selectedIndex = 0;
      setTimeout(() => { successMsg.style.display = 'none'; }, 4000);
      submitted = false;
    }
  });
</script>
</body>
</html>
